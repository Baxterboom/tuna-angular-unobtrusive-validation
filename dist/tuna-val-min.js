var Tuna;!function(n){!function(n){function t(t,e){return t[n.AttrName+e]}n.AttrName="val",n.Events={onElementError:function(n,t,e){}},n.Validators={equalto:{text:"Must match {other}",rule:function(n,e,r){var a=t(r,"Other");return function(n,t){return!n||angular.element(a).val()==n}}},required:{text:"Required field",rule:function(n,t,e){return function(n,t){return!/^$/.test(n||"")}}},regex:{text:"Invalid value",rule:function(n,e,r){var a=t(r,"RegexPattern"),u=new RegExp(a);return function(n,t){return!n||u.test(n)}}},date:{text:"Invalid date",rule:function(n,t,e){return function(n,t){if(!n)return!0;if(n.length<4)return!1;var e=Date.parse(n);return!1===isNaN(e)}}},digits:{text:"Only digits allowed",rule:function(n,t,e){return function(n,t){return null==n||!/\D+/.test(n)}}},number:{text:"Only numbers allowed",rule:function(n,t,e){return function(n,t){return null==n||(0==n.length||!isNaN(n))}}},email:{text:"Invalid email",rule:function(n,e,r){var a=t(r,"Email"),u=a?new RegExp(a):/.+@.+\..+/;return function(n,t){return!n||u.test(n)}}},range:{text:"Range must be between {min} and {max}",rule:function(n,e,r){var a=t(r,"RangeMin"),u=t(r,"RangeMax");return function(n,t){if(!n)return!0;if(isNaN(n))return!1;var e=parseFloat(n),r=null==a||e>=a,i=null==u||e<=u;return r&&i}}},length:{text:"Length must be between {min} and {max}",rule:function(n,e,r){var a=t(r,"LengthMin"),u=t(r,"LengthMax");return function(n,t){if(!n)return!0;var e=(n||"").length,r=!a||e>=a,i=!u||e<=u;return r&&i}}}}}(n.Validator||(n.Validator={}))}(Tuna||(Tuna={}));var Tuna;!function(n){!function(n){angular.module("tuna",[]).directive(n.AttrName,["$parse","$compile",function(t,e){var r=new RegExp("^(data-)?"+n.AttrName+"-([^-]+)$");return{restrict:"A",require:["^^form","?ngModel"],link:function(e,a,u,i){function l(n){var t;for(var e in n)if(n[e]){t=c(d[e]);break}return t||"Undefined error message for "+name+" validator"}function o(){return null!==v&&!0===t(u.val)()}function f(t){var r=n.Validators[t]||console.warn("No rule exists for "+t);return r&&(v.$validators[t]=r.rule(e,a,u)),r}function c(n){if(!n)return"";var t=n.attr,e=n.element.attributes,r=/{(\w+)}/g;return(t.value||n.validator.text||"").replace(r,function(n,r){var a=e[t.name+"-"+r];return a?a.value:r})}var v=i[1],d=function(n){if(!o())return null;var t={},e=n.attributes;for(var a in e){var u=e[a],i=r.exec(u.name);if(i){var l=i[i.length-1].toLowerCase(),c=f(l);c&&(t[l]={attr:u,name:l,element:n,validator:c})}}return t}(a[0]);d&&e.$evalAsync(function(){e.$watch(function(){return!0===v.$valid},function(t){var e=l(v.$error);n.Events.onElementError(v,a,e)})})}}}])}(n.Validator||(n.Validator={}))}(Tuna||(Tuna={}));