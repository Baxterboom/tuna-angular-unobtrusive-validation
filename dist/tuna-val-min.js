var Tuna;!function(n){function r(r,e){return r[n.ValidatorAttrName+e]}n.ValidatorAttrName="val",n.ValidatorEvents={onElementError:function(n,r,e){}},n.getValidatorAttr=r,n.Validators={texts:{regex:"Invalid value",date:"Invalid date",email:"Invalid email",range:"Range must be between {min} and {max}",digits:"Only digits allowed",number:"Only numbers allowed",required:"Required field",equalto:"must match {other}",length:"Length must be between {min} and {max}"},rules:{equalto:function(n,e,t){var a=r(t,"Other");return function(n,r){return!n||angular.element(a).val()==n}},required:function(n,r,e){var t=new RegExp(/^$/);return function(n,r){return!t.test(n||"")}},regex:function(n,e,t){var a=r(t,"RegexPattern"),u=new RegExp(a);return function(n,r){return!n||u.test(n)}},date:function(n,r,e){return function(n,r){if(!n)return!0;if(n.length<4)return!1;var e=Date.parse(n);return!1===isNaN(e)}},digits:function(n,r,e){return function(n,r){return!n||1==n.length&&!isNaN(n)}},number:function(n,r,e){return function(n,r){return!n||n.length>0&&!isNaN(n)}},email:function(n,e,t){var a=r(t,"Email"),u=a?new RegExp(a):/.+@.+\..+/;return function(n,r){return!n||u.test(n)}},range:function(n,e,t){var a=r(t,"RangeMin"),u=r(t,"RangeMax");return function(n,r){if(!n)return!0;if(isNaN(n))return!1;var e=parseFloat(n),t=null==a||e>=a,i=null==u||e<=u;return t&&i}},length:function(n,e,t){var a=r(t,"LengthMin"),u=r(t,"LengthMax");return function(n,r){if(!n)return!0;var e=(n||"").length,t=!a||e>=a,i=!u||e<=u;return t&&i}}}}}(Tuna||(Tuna={}));var Tuna;!function(n){angular.module("tuna",[]).directive(n.ValidatorAttrName,["$parse","$compile",function(r,e){var t=new RegExp("^(data-)?"+n.ValidatorAttrName+"-([^-]+)$");return{restrict:"A",require:["^^form","?ngModel"],link:function(e,a,u,i){function o(n){var r="Undefined error message";for(var e in n)if(r=v.texts[e],n[e])break;return r}function l(){return null!==s&&!0===r(u.val)()}function f(r){return n.Validators.rules[r]||console.warn("No rule exists for "+r)}function c(n,r,e){var t=/{(\w+)}/g;return(n.value||e||"").replace(t,function(e,t){var a=r[n.name+"-"+t];return a?a.value:t})}var s=i[1],v=function(r){if(!l())return null;var a={texts:{}},i=r[0].attributes;for(var o in i){var v=i[o],d=t.exec(v.name);if(d){var g=d[d.length-1].toLowerCase(),m=c(v,i,n.Validators.texts[g]),x=f(g);if(!x)return null;a.texts[g]=m,s.$validators[g]=x(e,r,u)}}return a}(a);v&&e.$evalAsync(function(){e.$watch(function(){return!0===s.$valid},function(r){var e=o(s.$error);n.ValidatorEvents.onElementError(s,a,e)})})}}}])}(Tuna||(Tuna={}));