var tuna;!function(n){!function(n){function t(t,e,r){var a=n.options.name+e;return r?t[a]=r:t[a]}function e(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return(n||"").replace(/{(\d+)}/g,function(n,e){return t[e]?t[e]:n})}n.options={name:"val",ignore:[":hidden"],onError:function(n,t,e){}},n.attr=t,n.format=e,n.validators={texts:{regex:"Invalid value",date:"Invalid date",email:"Invalid email",range:"Range must be between {0} and {1}",length:"Length must be between {0} and {1}",digits:"Only digits allowed",number:"Only numbers allowed",required:"Required field",equalto:"{0} must match {1}"},rules:{equalto:function(n){var e=t(n.attrs,"Other");return function(n,t){return!t||angular.element(e).val()==t}},required:function(n){var t=new RegExp(/^$/);return function(n,e){return!t.test(e||"")}},regex:function(n){var e=t(n.attrs,"RegexPattern"),r=new RegExp(e);return function(n,t){return!t||r.test(t)}},date:function(n){return function(n,t){if(!t)return!0;if(t.length<4)return!1;var e=Date.parse(t);return!1===isNaN(e)}},digits:function(n){return function(n,t){return!t||1==t.length&&!isNaN(t)}},number:function(n){return function(n,t){return!t||t.length>0&&!isNaN(t)}},email:function(n){var e=t(n.attrs,"Email"),r=t?new RegExp(e):/.+@.+\..+/;return function(n,t){return!t||r.test(t)}},range:function(n){var r=t(n.attrs,"RangeMin"),a=t(n.attrs,"RangeMax");return n.text=e(n.text,r,a),function(n,t){if(!t)return!0;if(isNaN(t))return!1;var e=parseFloat(t);return(null==r||e>=r)&&(null==a||e<=a)}},length:function(n){var r=t(n.attrs,"LengthMin"),a=t(n.attrs,"LengthMax");return n.text=e(n.text,r,a),function(n,t){if(!t)return!0;var e=(t||"").length;return(!r||e>=r)&&(!a||e<=a)}}}}}(n.jsval||(n.jsval={}))}(tuna||(tuna={})),function(n){!function(n){angular.module("tuna.jsval",[]).directive(n.options.name,["$parse","$compile",function(t,e){var r=new RegExp("^(data-)?"+n.options.name+"-([^-]+)$");return{restrict:"A",require:["^^form","?ngModel"],link:function(e,a,u,i){i[0];var o=i[1],l=function(a){if(null===o||!0!==t(u.val)(e))return null;var i={rules:{},texts:{}},l=a[0].attributes,s=function(){var t=l[f],e=r.exec(t.name);if(!e)return"continue";var s=e[e.length-1].toLowerCase(),c=n.validators.rules[s];if(!c)return console.error("No rule exists for "+s),"continue";var v=t.value||n.validators.texts[s],g={rule:c,text:v,attrs:u,element:a};i.rules[s]=g.rule,i.texts[s]=g.text;var d=g.rule(g);o.$validators[s]=function(t,e){return!!n.options.ignore.some(function(n){return a.is(n)})||d(t,e)}};for(var f in l)s();return i}(a);function s(){return!0===o.$valid}l&&e.$evalAsync(function(){e.$watch(s,function(t){var e=function(n){var t="Undefined error message";for(var e in n)if(t=l.texts[e],n[e])break;return t}(o.$error);n.options.onError(o,a,e)})})}}}])}(n.jsval||(n.jsval={}))}(tuna||(tuna={}));