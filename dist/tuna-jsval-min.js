var Tuna;!function(n){function r(r,e){return r[n.ValidatorAttrName+e]}n.ValidatorAttrName="val",n.ValidatorEvents={onElementError:function(n,r,e){}},n.getValidatorAttribute=r,n.Validators={texts:{regex:"Invalid value",date:"Invalid date",email:"Invalid email",range:"Range must be between {0} and {1}",digits:"Only digits allowed",number:"Only numbers allowed",required:"Required field",equalto:"{0} must match {1}"},rules:{equalto:function(n,e,t){var a=r(t,"Other");return function(n,r){return!r||angular.element(a).val()==r}},required:function(n,r,e){var t=new RegExp(/^$/);return function(n,r){return!t.test(r||"")}},regex:function(n,e,t){var a=r(t,"RegexPattern"),u=new RegExp(a);return function(n,r){return!r||u.test(r)}},date:function(n,r,e){return function(n,r){if(!r)return!0;if(r.length<4)return!1;var e=Date.parse(r);return!1===isNaN(e)}},digits:function(n,r,e){return function(n,r){return!r||1==r.length&&!isNaN(r)}},number:function(n,r,e){return function(n,r){return!r||r.length>0&&!isNaN(r)}},email:function(n,e,t){var a=r(t,"Email"),u=a?new RegExp(a):/.+@.+\..+/;return function(n,r){return!r||u.test(r)}},range:function(n,e,t){var a=r(t,"RangeMin"),u=r(t,"RangeMax");return function(n,r){if(!r)return!0;if(isNaN(r))return!1;var e=parseFloat(r);return(null==a||e>=a)&&(null==u||e<=u)}},length:function(n,e,t){var a=r(t,"LengthMin"),u=r(t,"LengthMax");return function(n,r){if(!r)return!0;var e=(r||"").length;return(!a||e>=a)&&(!u||e<=u)}}}}}(Tuna||(Tuna={})),function(n){angular.module("tuna",[]).directive(n.ValidatorAttrName,["$parse","$compile",function(r,e){var t=new RegExp("^(data-)?"+n.ValidatorAttrName+"-([^-]+)$");return{restrict:"A",require:["^^form","?ngModel"],link:function(e,a,u,i){i[0];var l=i[1],o=function(a){if(null===l||!0!==r(u.val)(e))return null;var i={rules:{},texts:{}},o=a[0].attributes;for(var f in o){var s=o[f],c=t.exec(s.name);if(c){var d=c[c.length-1].toLowerCase(),v=s.value||n.Validators.texts[d],g=n.Validators.rules[d];if(!g)return console.error("No rule exists for "+d),null;i.texts[d]=v,i.rules[d]=g,l.$validators[d]=i.rules[d](e,a,u)}}return i}(a);function f(){return!0===l.$valid}o&&e.$evalAsync(function(){e.$watch(f,function(r){var e=function(n){var r="Undefined error message";for(var e in n)if(r=o.texts[e],n[e])break;return r}(l.$error);n.ValidatorEvents.onElementError(l,a,e)})})}}}])}(Tuna||(Tuna={}));