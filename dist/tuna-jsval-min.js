var tuna;!function(t){!function(t){function n(n,r,e){var a=t.options.name+r;return e?n[a]=e:n[a]}function r(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return(t||"").replace(/{(\d+)}/g,function(t,r){return n[r]?n[r]:t})}t.options={name:"val",ignore:[":disabled"],onError:function(t,n){}},t.attr=n,t.format=r,t.rules={equalto:{text:"must match {0}",valid:function(t){var e=n(t.attrs,"Other");return t.text=r(t.text,e),function(t,n){return!n||angular.element(e).val()==n}}},required:{text:"Required field",valid:function(t){var n=new RegExp(/^$/);return function(t,r){return!n.test(r||"")}}},regex:{text:"Invalid value",valid:function(t){var r=n(t.attrs,"RegexPattern"),e=new RegExp(r);return function(t,n){return!n||e.test(n)}}},date:{text:"Invalid date",valid:function(t){return function(t,n){if(!n)return!0;if(n.length<4)return!1;var r=Date.parse(n);return!1===isNaN(r)}}},digits:{text:"Only digits allowed",valid:function(t){return function(t,n){return!n||1==n.length&&!isNaN(n)}}},number:{text:"Only numbers allowed",valid:function(t){return function(t,n){return!n||n.length>0&&!isNaN(n)}}},email:{text:"Invalid email",valid:function(t){var r=n(t.attrs,"Email"),e=n?new RegExp(r):/.+@.+\..+/;return function(t,n){return!n||e.test(n)}}},range:{text:"Range must be between {0} and {1}",valid:function(t){var e=n(t.attrs,"RangeMin"),a=n(t.attrs,"RangeMax");return t.text=r(t.text,e,a),function(t,n){if(!n)return!0;if(isNaN(n))return!1;var r=parseFloat(n);return(null==e||r>=e)&&(null==a||r<=a)}}},length:{text:"Length must be between {0} and {1}",valid:function(t){var e=n(t.attrs,"LengthMin"),a=n(t.attrs,"LengthMax");return t.text=r(t.text,e,a),function(t,n){if(!n)return!0;var r=(n||"").length;return(!e||r>=e)&&(!a||r<=a)}}}}}(t.jsval||(t.jsval={}))}(tuna||(tuna={})),function(t){!function(t){angular.module("tuna.jsval",[]).directive(t.options.name,["$parse",function(n){var r=new RegExp("^(data-)?"+t.options.name+"-([^-]+)$");return{restrict:"A",require:["^^form","?ngModel"],link:function(e,a,i,u){var o=u[1],l=function(a){if(null===o||!0!==n(i.val)(e))return null;var u={},l=a[0].attributes,f=function(){var n=l[s],e=r.exec(n.name);if(!e)return"continue";var f=e[e.length-1].toLowerCase(),v=t.rules[f];if(!v)return console.error('Rule "'+f+'" is missing. To add it: tuna.jsval.rules["'+f+'"] = { text: "", valid: (validator) => boolean} };'),"continue";var c=u[f]={text:v.text,attrs:i,element:a},d=v.valid(c);o.$validators[f]=function(n,r){if(t.options.ignore.some(function(t){return a.is(t)}))return!0;var e=d(n,r);return e}};for(var s in l)f();return u}(a);function f(){return!0===o.$valid}function s(t){for(var n in t)if(t[n])return l[n]}l&&function(){if(!t.options.onError)return;e.$evalAsync(function(){e.$watch(f,function(n){var r=s(o.$error);r&&t.options.onError(r,o)})})}()}}}])}(t.jsval||(t.jsval={}))}(tuna||(tuna={}));