var Tuna;!function(e){function n(n,t){return n[e.ValidatorAttrName+t]}function t(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return(e||"").replace(/{(\d+)}/g,function(e,t){return n[t]?n[t]:e})}e.Ignore=[":hidden"],e.ValidatorAttrName="val",e.ValidatorEvents={onElementError:function(e,n,t){}},e.getValidatorAttribute=n,e.format=t,e.Validators={texts:{regex:"Invalid value",date:"Invalid date",email:"Invalid email",range:"Range must be between {0} and {1}",length:"Length must be between {0} and {1}",digits:"Only digits allowed",number:"Only numbers allowed",required:"Required field",equalto:"{0} must match {1}"},rules:{equalto:function(e,t,r){var a=n(r,"Other");return function(e,n){return!n||angular.element(a).val()==n}},required:function(e,n,t){var r=new RegExp(/^$/);return function(e,n){return!r.test(n||"")}},regex:function(e,t,r){var a=n(r,"RegexPattern"),u=new RegExp(a);return function(e,n){return!n||u.test(n)}},date:function(e,n,t){return function(e,n){if(!n)return!0;if(n.length<4)return!1;var t=Date.parse(n);return!1===isNaN(t)}},digits:function(e,n,t){return function(e,n){return!n||1==n.length&&!isNaN(n)}},number:function(e,n,t){return function(e,n){return!n||n.length>0&&!isNaN(n)}},email:function(e,t,r){var a=n(r,"Email"),u=a?new RegExp(a):/.+@.+\..+/;return function(e,n){return!n||u.test(n)}},range:function(e,r,a){var u=n(a,"RangeMin"),i=n(a,"RangeMax");return e.text=t(e.text,u,i),function(e,n){if(!n)return!0;if(isNaN(n))return!1;var t=parseFloat(n);return(null==u||t>=u)&&(null==i||t<=i)}},length:function(e,r,a){var u=n(a,"LengthMin"),i=n(a,"LengthMax");return e.text=t(e.text,u,i),function(e,n){if(!n)return!0;var t=(n||"").length;return(!u||t>=u)&&(!i||t<=i)}}}}}(Tuna||(Tuna={})),function(e){angular.module("tuna.jsval",[]).directive(e.ValidatorAttrName,["$parse","$compile",function(n,t){var r=new RegExp("^(data-)?"+e.ValidatorAttrName+"-([^-]+)$");return{restrict:"A",require:["^^form","?ngModel"],link:function(t,a,u,i){i[0];var o=i[1],l=function(a){if(null===o||!0!==n(u.val)(t))return null;var i={rules:{},texts:{}},l=a[0].attributes,f=function(){var n=l[c],t=r.exec(n.name);if(t){var f=t[t.length-1].toLowerCase(),s={rule:e.Validators.rules[f],text:n.value||e.Validators.texts[f]};if(!s.rule)return{value:console.error("No rule exists for "+f)};var v=s.rule(s,a,u);i.rules[f]=s.rule,i.texts[f]=s.text,o.$validators[f]=function(n,t){return!!e.Ignore.some(function(e){return a.is(e)})||v(n,t)}}};for(var c in l){var s=f();if("object"==typeof s)return s.value}return i}(a);function f(){return!0===o.$valid}l&&t.$evalAsync(function(){t.$watch(f,function(n){var t=function(e){var n="Undefined error message";for(var t in e)if(n=l.texts[t],e[t])break;return n}(o.$error);e.ValidatorEvents.onElementError(o,a,t)})})}}}])}(Tuna||(Tuna={}));